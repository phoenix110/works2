<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://editorCaption"
        class="com.cernol.works.web.worksorder.WorksOrderEdit"
        datasource="worksOrderDs"
        focusComponent="fieldGroup"
        messagesPack="com.cernol.works.web.worksorder">
    <dsContext>

        <datasource id="worksOrderDs"
                    class="com.cernol.works.entity.WorksOrder"
                    view="worksOrder-view">
            <collectionDatasource id="worksOrderPackingsDs"
                                  property="worksOrderPackings"/>
            <collectionDatasource id="worksOrderIngredientsDs"
                                  property="worksOrderIngredients"/>
            <collectionDatasource id="worksOrderLablesDs"
                                  property="worksOrderLables"/>
        </datasource>
    </dsContext>
    <actions>
        <action id="refreshValues"
                caption="msg://refreshButton"
                invoke="resetIngredients"/>
    </actions>
    <dialogMode height="600"
                width="800"/>
    <layout expand="scrollBox"
            spacing="true">
        <scrollBox id="scrollBox"
                   spacing="true">
            <fieldGroup id="fieldGroup"
                        datasource="worksOrderDs">
                <column width="250px">
                    <field property="documentNo"
                           editable="false"/>
                    <field property="documentOn"/>
                    <field property="product"/>
                    <field property="mixer"/>
                    <field property="manufacturingKey"/>
                    <field property="currentStatus"/>
                </column>
                <column width="250px">
                    <field editable="false"
                           property="unit"/>
                    <field editable="false"
                           property="volume"/>
                    <field editable="false"
                           property="mass"/>
                    <field editable="false"
                           property="batchQuantity"/>
                    <field editable="false"
                           property="rawMaterialCost"/>
                    <field editable="false"
                           property="containerCost"/>
                    <field editable="false"
                           property="lableCost"/>
                    <field editable="false"
                           property="overheadCost"/>
                    <field editable="false"
                           property="totalCost"/>
                </column>
            </fieldGroup>
            <tabSheet>
                <tab id="worksOrderPackingsTab"
                     caption="msg://com.cernol.works.entity/WorksOrder.worksOrderPackings"
                     margin="true,false,false,false">
                    <table id="worksOrderPackingsTable"
                           height="300px"
                           width="100%">
                        <actions>
                            <action id="create"/>
                            <action id="edit"/>
                            <action id="remove"/>
                        </actions>
                        <columns>
                            <column id="container"/>
                            <column id="quantity"/>
                            <column id="unitCost"/>
                            <column id="customersOwn"/>
                            <column id="additional"/>
                            <column id="lineCost"/>
                        </columns>
                        <rows datasource="worksOrderPackingsDs"/>
                        <buttonsPanel>
                            <button action="worksOrderPackingsTable.create"/>
                            <button action="worksOrderPackingsTable.edit"/>
                            <button action="worksOrderPackingsTable.remove"/>
                        </buttonsPanel>
                    </table>
                </tab>
                <tab id="worksOrderIngredientsTab"
                     caption="msg://com.cernol.works.entity/WorksOrder.worksOrderIngredients"
                     margin="true,false,false,false"
                     spacing="true">
                    <table id="worksOrderIngredientsTable"
                           height="300px"
                           width="100%">
                        <actions>
                            <action id="create"/>
                            <action id="edit"/>
                            <action id="remove"/>
                        </actions>
                        <columns>
                            <column id="sequenceNo"/>
                            <column id="rawMaterial"/>
                            <column id="mass"/>
                            <column id="kgCost"/>
                            <column id="lineCost"/>
                        </columns>
                        <rows datasource="worksOrderIngredientsDs"/>
                        <buttonsPanel>
                            <button action="refreshValues"
                                    icon="icons/refresh.png"/>
                        </buttonsPanel>
                    </table>
                </tab>
                <tab id="worksOrderLablesTab"
                     caption="msg://com.cernol.works.entity/WorksOrder.worksOrderLables"
                     margin="true,false,false,false"
                     spacing="true">
                    <table id="worksOrderLablesTable"
                           height="300px"
                           width="100%">
                        <actions>
                            <action id="create"/>
                            <action id="edit"/>
                            <action id="remove"/>
                        </actions>
                        <columns>
                            <column id="lable"/>
                        </columns>
                        <rows datasource="worksOrderLablesDs"/>
                        <buttonsPanel>
                            <button action="worksOrderLablesTable.create"/>
                            <button action="worksOrderLablesTable.edit"/>
                            <button action="worksOrderLablesTable.remove"/>
                        </buttonsPanel>
                    </table>
                </tab>
            </tabSheet>
        </scrollBox>
        <frame id="windowActions"
               screen="extendedEditWindowActions"/>
    </layout>
</window>
